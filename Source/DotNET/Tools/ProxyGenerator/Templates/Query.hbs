/*---------------------------------------------------------------------------------------------
 *  **DO NOT EDIT** - This file is an automatically generated file.
 *--------------------------------------------------------------------------------------------*/

/* eslint-disable sort-imports */
// eslint-disable-next-line header/header
{{#if IsEnumerable}}
{{#if Properties.[0]}}
import { QueryFor, QueryResultWithState, QueryValidator, Sorting, SortingActions, SortingActionsForQuery, Paging } from '@cratis/arc/queries';
{{else}}
import { QueryFor, QueryResultWithState, QueryValidator, Sorting, Paging } from '@cratis/arc/queries';
{{/if}}
import { useQuery, useQueryWithPaging, PerformQuery, SetSorting, SetPage, SetPageSize } from '@cratis/arc.react/queries';
{{else}}
import { QueryFor, QueryResultWithState, QueryValidator } from '@cratis/arc/queries';
import { useQuery, PerformQuery } from '@cratis/arc.react/queries';
{{/if}}
import { ParameterDescriptor } from '@cratis/arc/reflection';
{{#Imports}}
import { {{Type}} } from '{{Module}}';
{{/Imports}}

{{#if IsEnumerable}}
class {{Name}}SortBy {
{{#Properties}}
    private _{{camelCase Name}}: SortingActionsForQuery<{{../Model}}[]>;
{{/Properties}}

    constructor(readonly query: {{Name}}) {
{{#Properties}}
        this._{{camelCase Name}} = new SortingActionsForQuery<{{../Model}}[]>('{{camelCase Name}}', query);
{{/Properties}}
    }

{{#Properties}}
    get {{camelCase Name}}(): SortingActionsForQuery<{{../Model}}[]> {
        return this._{{camelCase Name}};
    }
{{/Properties}}
}

class {{Name}}SortByWithoutQuery {
{{#Properties}}
    private _{{camelCase Name}}: SortingActions  = new SortingActions('{{camelCase Name}}');
{{/Properties}}

{{#Properties}}
    get {{camelCase Name}}(): SortingActions {
        return this._{{camelCase Name}};
    }
{{/Properties}}
}
{{/if}}

{{#if Parameters.[0]}}
{{#if Documentation}}
/**
 * {{Documentation}}
 */
{{/if}}
export interface {{Name}}Parameters {
    {{#Parameters}}
    {{#if Documentation}}
    
    /**
     * {{Documentation}}
    */
    {{/if}}
    {{#if IsOptional}}
    {{camelcase Name}}?: {{Type}};
    {{else}}
    {{camelcase Name}}: {{Type}};
    {{/if}}
    {{/Parameters}}
}

export class {{Name}}Validator extends QueryValidator<{{Name}}Parameters> {
    constructor() {
        super();
        {{#each ValidationRules}}
        {{#each Rules}}
        this.ruleFor(c => c.{{camelcase ../PropertyName}}){{#if Arguments.length}}.{{RuleName}}({{#each Arguments}}{{this}}{{#unless @last}}, {{/unless}}{{/each}}){{else}}.{{RuleName}}(){{/if}}{{#if ErrorMessage}}.withMessage('{{ErrorMessage}}'){{/if}};
        {{/each}}
        {{/each}}
    }
}

{{#if Documentation}}
/**
 * {{Documentation}}
 */
{{/if}}
{{#if IsEnumerable}}
export class {{Name}} extends QueryFor<{{Model}}[], {{Name}}Parameters> {
{{else}}
export class {{Name}} extends QueryFor<{{Model}}, {{Name}}Parameters> {
{{/if}}
{{else}}
export class {{Name}}Validator extends QueryValidator<object> {
    constructor() {
        super();
        {{#each ValidationRules}}
        {{#each Rules}}
        this.ruleFor(c => c.{{camelcase ../PropertyName}}){{#if Arguments.length}}.{{RuleName}}({{#each Arguments}}{{this}}{{#unless @last}}, {{/unless}}{{/each}}){{else}}.{{RuleName}}(){{/if}}{{#if ErrorMessage}}.withMessage('{{ErrorMessage}}'){{/if}};
        {{/each}}
        {{/each}}
    }
}

{{#if Documentation}}
/**
 * {{Documentation}}
 */
{{/if}}
{{#if IsEnumerable}}
export class {{Name}} extends QueryFor<{{Model}}[]> {
{{else}}
export class {{Name}} extends QueryFor<{{Model}}> {
{{/if}}
{{/if}}
    readonly route: string = '{{{Route}}}';
    readonly validation: QueryValidator = new {{Name}}Validator();
{{#if IsEnumerable}}
    readonly defaultValue: {{Model}}[] = [];
    private readonly _sortBy: {{Name}}SortBy;
    private static readonly _sortBy: {{Name}}SortByWithoutQuery = new {{Name}}SortByWithoutQuery();
{{else}}
    readonly defaultValue: {{Model}} = {} as any;
{{/if}}

    constructor() {
        super({{Constructor}}, {{lowercase IsEnumerable}});
{{#if IsEnumerable}}        
        this._sortBy = new {{Name}}SortBy(this);
{{/if}}
    }

    get requiredRequestParameters(): string[] {
        return [
            {{#RequiredParameters}}
            '{{camelcase Name}}',
            {{/RequiredParameters}}
        ];
    }

    readonly parameterDescriptors: ParameterDescriptor[] = [
        {{#Parameters}}
        new ParameterDescriptor('{{camelcase Name}}', {{Constructor}}),
        {{/Parameters}}
    ];

{{#Parameters}}
    {{camelcase Name}}!: {{Type}};
{{/Parameters}}

{{#if IsEnumerable}}
    get sortBy(): {{Name}}SortBy {
        return this._sortBy;
    }

    static get sortBy(): {{Name}}SortByWithoutQuery {
        return this._sortBy;
    }
{{/if}}

{{#if Parameters.[0]}}
{{#if IsEnumerable}}
    static use(args?: {{Name}}Parameters, sorting?: Sorting): [QueryResultWithState<{{Model}}[]>, PerformQuery<{{Name}}Parameters>, SetSorting] {
        return useQuery<{{Model}}[], {{Name}}, {{Name}}Parameters>({{Name}}, args, sorting);
    }

    static useWithPaging(pageSize: number, args?: {{Name}}Parameters, sorting?: Sorting): [QueryResultWithState<{{Model}}[]>, PerformQuery, SetSorting, SetPage, SetPageSize] {
        return useQueryWithPaging<{{Model}}[], {{Name}}>({{Name}}, new Paging(0, pageSize), args, sorting);
    }
{{else}}
    static use(args?: {{Name}}Parameters): [QueryResultWithState<{{Model}}>, PerformQuery<{{Name}}Parameters>] {
        const [result, perform] = useQuery<{{Model}}, {{Name}}, {{Name}}Parameters>({{Name}}, args);
        return [result, perform];
    }
{{/if}}
{{else}}
{{#if IsEnumerable}}
    static use(sorting?: Sorting): [QueryResultWithState<{{Model}}[]>, PerformQuery, SetSorting] {
        return useQuery<{{Model}}[], {{Name}}>({{Name}}, undefined, sorting);
    }

    static useWithPaging(pageSize: number, sorting?: Sorting): [QueryResultWithState<{{Model}}[]>, PerformQuery, SetSorting, SetPage, SetPageSize] {
        return useQueryWithPaging<{{Model}}[], {{Name}}>({{Name}}, new Paging(0, pageSize), undefined, sorting);
    }
{{else}}
    static use(): [QueryResultWithState<{{Model}}>, PerformQuery] {
        const [result, perform] = useQuery<{{Model}}, {{Name}}>({{Name}});
        return [result, perform];
    }
{{/if}}
{{/if}}
}
