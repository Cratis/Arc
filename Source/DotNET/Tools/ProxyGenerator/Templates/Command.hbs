/*---------------------------------------------------------------------------------------------
 *  **DO NOT EDIT** - This file is an automatically generated file.
 *--------------------------------------------------------------------------------------------*/

/* eslint-disable sort-imports */
/* eslint-disable @typescript-eslint/no-empty-interface */
// eslint-disable-next-line header/header
import { Command, CommandValidator } from '@cratis/arc/commands';
import { useCommand, SetCommandValues, ClearCommandValues } from '@cratis/arc.react/commands';
import { PropertyDescriptor } from '@cratis/arc/reflection';
{{#Imports}}
import { {{{Type}}} } from '{{Module}}';
{{/Imports}}

{{#if Documentation}}
/**
 * {{Documentation}}
 */
{{/if}}
export interface I{{Name}} {
    {{#Properties}}
    {{#if Documentation}}
    
    /**
     * {{Documentation}}
     */
    {{/if}}
    {{#if IsEnumerable}}
    {{camelcase Name}}?: {{{Type}}}[];
    {{else}}
    {{camelcase Name}}?: {{{Type}}};
    {{/if}}
    {{/Properties}}
}

export class {{Name}}Validator extends CommandValidator<I{{Name}}> {
    constructor() {
        super();
        {{#each ValidationRules}}
        {{#each Rules}}
        this.ruleFor(c => c.{{camelcase ../PropertyName}}){{#if Arguments.length}}.{{RuleName}}({{#each Arguments}}{{this}}{{#unless @last}}, {{/unless}}{{/each}}){{else}}.{{RuleName}}(){{/if}}{{#if ErrorMessage}}.withMessage('{{ErrorMessage}}'){{/if}};
        {{/each}}
        {{/each}}
    }
}

{{#if Documentation}}
/**
 * {{Documentation}}
 */
{{/if}}
{{#if HasResponse }}
export class {{Name}} extends Command<I{{Name}}, {{{ResponseType.Name}}}> implements I{{Name}} {
{{else}}
export class {{Name}} extends Command<I{{Name}}> implements I{{Name}} {
{{/if}}
    readonly route: string = '{{{Route}}}';
    readonly validation: CommandValidator = new {{Name}}Validator();
    readonly propertyDescriptors: PropertyDescriptor[] = [
        {{#Properties}}
        new PropertyDescriptor('{{camelcase Name}}', {{{Constructor}}}, {{lowercase IsNullable}}),
        {{/Properties}}
    ];

    {{#Properties}}
    {{#if IsEnumerable}}
    private _{{camelcase Name}}!: {{{Type}}}[];
    {{else}}
    private _{{camelcase Name}}!: {{{Type}}};
    {{/if}}
    {{/Properties}}

{{#if HasResponse }}
    constructor() {
        super({{{ResponseType.Constructor}}}, {{lowercase ResponseType.IsEnumerable}});
    }
{{else}}
    constructor() {
        super(Object, false);
    }
{{/if}}

    get requestParameters(): string[] {
        return [
            {{#Parameters}}
            '{{camelcase Name}}',
            {{/Parameters}}
        ];
    }

    {{#Properties}}
    {{#if Documentation}}
    /**
     * {{Documentation}}
     */
    {{/if}}
    {{#if IsEnumerable}}
    get {{camelcase Name}}(): {{{Type}}}[] {
        return this._{{camelcase Name}};
    }

    set {{camelcase Name}}(value: {{{Type}}}[]) {
        this._{{camelcase Name}} = value;
        this.propertyChanged('{{camelcase Name}}');
    }
    {{else}}
    get {{camelcase Name}}(): {{{Type}}} {
        return this._{{camelcase Name}};
    }

    set {{camelcase Name}}(value: {{{Type}}}) {
        this._{{camelcase Name}} = value;
        this.propertyChanged('{{camelcase Name}}');
    }
    {{/if}}
    {{/Properties}}

    static use(initialValues?: I{{Name}}): [{{Name}}, SetCommandValues<I{{Name}}>, ClearCommandValues] {
        // eslint-disable-next-line @typescript-eslint/ban-ts-comment
        // @ts-ignore
        return useCommand<{{Name}}, I{{Name}}>({{Name}}, initialValues);
    }
}
