{
    "$schema": "http://json.schemastore.org/template",
    "author": "Cratis",
    "classifications": [
        "Web",
        "ASP.NET",
        "Cratis",
        "Arc",
        "Chronicle"
    ],
    "identity": "Cratis.Templates.Web",
    "name": "Cratis Web Application",
    "shortName": "cratis",
    "description": "A template for creating a Cratis web application with optional React frontend",
    "tags": {
        "language": "C#",
        "type": "project"
    },
    "sourceName": "CratisApp",
    "preferNameDirectory": true,
    "symbols": {
        "EnableFrontend": {
            "type": "parameter",
            "datatype": "bool",
            "defaultValue": "true",
            "description": "Enable React/TypeScript/Vite frontend",
            "prompt": "Add React frontend?"
        },
        "skipRestore": {
            "type": "parameter",
            "datatype": "bool",
            "defaultValue": "false",
            "description": "Skip restore on template instantiation",
            "prompt": "Skip restore?"
        },
        "Framework": {
            "type": "parameter",
            "datatype": "choice",
            "choices": [
                {
                    "choice": "net8.0",
                    "description": ".NET 8"
                },
                {
                    "choice": "net9.0",
                    "description": ".NET 9"
                },
                {
                    "choice": "net10.0",
                    "description": ".NET 10"
                }
            ],
            "defaultValue": "net10.0",
            "description": "Target framework",
            "prompt": "Select target framework"
        }
    },
    "sources": [
        {
            "modifiers": [
                {
                    "condition": "(!EnableFrontend)",
                    "exclude": [
                        "Source/**/*.html",
                        "Source/**/*.ts",
                        "Source/**/*.tsx",
                        "Source/**/*.css",
                        "Source/package.json",
                        "Source/tsconfig.json",
                    ]
                }
            ]
        }
    ],
    "postActions": [
        {
            "condition": "(!skipRestore)",
            "description": "Restore NuGet packages required by this project.",
            "manualInstructions": [
                {
                    "text": "Run 'dotnet restore'"
                }
            ],
            "actionId": "210D431B-A78B-4D2F-B762-4ED3E3EA9025",
            "continueOnError": true
        },
        {
            "condition": "(EnableFrontend)",
            "description": "Update Cratis packages to latest versions.",
            "actionId": "3A7C4B45-1F5D-4A30-959A-51B88EABA521",
            "args": {
                "executable": "node",
                "args": ".template.config/update-dependencies.js"
            },
            "continueOnError": true,
            "manualInstructions": [
                {
                    "text": "To manually update dependencies, run 'npm view @cratis/arc version' and 'npm view @cratis/arc.react version' and update Source/package.json accordingly"
                }
            ]
        },
        {
            "condition": "(EnableFrontend && !skipRestore)",
            "description": "Install frontend dependencies with yarn.",
            "manualInstructions": [
                {
                    "text": "Run 'cd Source && yarn install'"
                }
            ],
            "actionId": "210D431B-A78B-4D2F-B762-4ED3E3EA9025",
            "continueOnError": true
        }
    ]
}