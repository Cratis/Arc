{
    "$schema": "http://json.schemastore.org/template",
    "author": "Cratis",
    "classifications": [
        "Web",
        "ASP.NET",
        "Cratis",
        "Arc",
        "Chronicle"
    ],
    "identity": "Cratis.Templates.Web",
    "name": "Cratis Web Application",
    "shortName": "cratis",
    "description": "A template for creating a Cratis web application with optional React frontend",
    "tags": {
        "language": "C#",
        "type": "project"
    },
    "sourceName": "CratisApp",
    "preferNameDirectory": true,
    "primaryOutputs": [
        {
            "path": "CratisApp.csproj"
        }
    ],
    "symbols": {
        "EnableFrontend": {
            "type": "parameter",
            "datatype": "bool",
            "defaultValue": "true",
            "description": "Enable React/TypeScript/Vite frontend",
            "prompt": "Add React frontend?"
        },
        "skipRestore": {
            "type": "parameter",
            "datatype": "bool",
            "defaultValue": "false",
            "description": "Skip restore on template instantiation",
            "prompt": "Skip restore?"
        },
        "Framework": {
            "type": "parameter",
            "datatype": "choice",
            "choices": [
                {
                    "choice": "net8.0",
                    "description": ".NET 8"
                },
                {
                    "choice": "net9.0",
                    "description": ".NET 9"
                },
                {
                    "choice": "net10.0",
                    "description": ".NET 10"
                }
            ],
            "defaultValue": "net10.0",
            "description": "Target framework",
            "prompt": "Select target framework"
        }
    },
    "sources": [
        {
            "modifiers": [
                {
                    "condition": "(!EnableFrontend)",
                    "exclude": [
                        "**/*.html",
                        "**/*.ts",
                        "**/*.tsx",
                        "**/*.css",
                        "package.json",
                        "tsconfig.json"
                    ]
                }
            ]
        }
    ],
    "postActions": [
        {
            "description": "Update Cratis dependencies to latest versions.",
            "actionId": "CB8F3B80-9C51-11E6-9F33-2C4D65430DBE",
            "args": {
                "executable": "node",
                "args": "update-dependencies.js"
            },
            "continueOnError": true,
            "manualInstructions": [
                {
                    "text": "Run 'dotnet add *.csproj package Cratis' and 'dotnet add *.csproj package Cratis.Arc.ProxyGenerator.Build'. If frontend is enabled, run 'npm view @cratis/arc version' and 'npm view @cratis/arc.react version' and update package.json accordingly"
                }
            ]
        },
        {
            "condition": "(!skipRestore)",
            "description": "Restore NuGet packages required by this project.",
            "manualInstructions": [
                {
                    "text": "Run 'dotnet restore'"
                }
            ],
            "actionId": "210D431B-A78B-4D2F-B762-4ED3E3EA9025",
            "args": {
                "targetFiles": [
                    "CratisApp.csproj"
                ]
            },
            "continueOnError": true
        },
        {
            "condition": "(EnableFrontend && !skipRestore)",
            "description": "Install frontend dependencies with yarn.",
            "manualInstructions": [
                {
                    "text": "Run 'yarn install'"
                }
            ],
            "actionId": "CB8F3B80-9C51-11E6-9F33-2C4D65430DBE",
            "args": {
                "executable": "yarn",
                "args": "install"
            },
            "continueOnError": true
        }
    ]
}