var _t=Object.defineProperty;var Ft=(n,e,t)=>e in n?_t(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var c=(n,e,t)=>Ft(n,typeof e!="symbol"?e+"":e,t);import{c as De}from"./index-BO-NyGGJ.js";class xt{constructor(e,t,s,o){c(this,"name");c(this,"type");c(this,"enumerable");c(this,"derivatives");this.name=e,this.type=t,this.enumerable=s,this.derivatives=o}}var $e={};/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var qe;function Rt(){if(qe)return $e;qe=1;var n;return(function(e){(function(t){var s=typeof globalThis=="object"?globalThis:typeof De=="object"?De:typeof self=="object"?self:typeof this=="object"?this:E(),o=p(e);typeof s.Reflect<"u"&&(o=p(s.Reflect,o)),t(o,s),typeof s.Reflect>"u"&&(s.Reflect=e);function p(j,D){return function(N,k){Object.defineProperty(j,N,{configurable:!0,writable:!0,value:k}),D&&D(N,k)}}function g(){try{return Function("return this;")()}catch{}}function b(){try{return(0,eval)("(function() { return this; })()")}catch{}}function E(){return g()||b()}})(function(t,s){var o=Object.prototype.hasOwnProperty,p=typeof Symbol=="function",g=p&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",b=p&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",E=typeof Object.create=="function",j={__proto__:[]}instanceof Array,D=!E&&!j,N={create:E?function(){return pe(Object.create(null))}:j?function(){return pe({__proto__:null})}:function(){return pe({})},has:D?function(r,a){return o.call(r,a)}:function(r,a){return a in r},get:D?function(r,a){return o.call(r,a)?r[a]:void 0}:function(r,a){return r[a]}},k=Object.getPrototypeOf(Function),G=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:gt(),R=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:vt(),F=typeof WeakMap=="function"?WeakMap:wt(),Z=p?Symbol.for("@reflect-metadata:registry"):void 0,ee=pt(),Fe=yt(ee);function Xe(r,a,i,u){if(m(i)){if(!Ae(r))throw new TypeError;if(!Ne(a))throw new TypeError;return it(r,a)}else{if(!Ae(r))throw new TypeError;if(!P(a))throw new TypeError;if(!P(u)&&!m(u)&&!X(u))throw new TypeError;return X(u)&&(u=void 0),i=L(i),ot(r,a,i,u)}}t("decorate",Xe);function Ye(r,a){function i(u,y){if(!P(u))throw new TypeError;if(!m(y)&&!ft(y))throw new TypeError;Oe(r,a,u,y)}return i}t("metadata",Ye);function Qe(r,a,i,u){if(!P(i))throw new TypeError;return m(u)||(u=L(u)),Oe(r,a,i,u)}t("defineMetadata",Qe);function Ke(r,a,i){if(!P(a))throw new TypeError;return m(i)||(i=L(i)),xe(r,a,i)}t("hasMetadata",Ke);function et(r,a,i){if(!P(a))throw new TypeError;return m(i)||(i=L(i)),de(r,a,i)}t("hasOwnMetadata",et);function tt(r,a,i){if(!P(a))throw new TypeError;return m(i)||(i=L(i)),Re(r,a,i)}t("getMetadata",tt);function rt(r,a,i){if(!P(a))throw new TypeError;return m(i)||(i=L(i)),Pe(r,a,i)}t("getOwnMetadata",rt);function nt(r,a){if(!P(r))throw new TypeError;return m(a)||(a=L(a)),Se(r,a)}t("getMetadataKeys",nt);function st(r,a){if(!P(r))throw new TypeError;return m(a)||(a=L(a)),ke(r,a)}t("getOwnMetadataKeys",st);function at(r,a,i){if(!P(a))throw new TypeError;if(m(i)||(i=L(i)),!P(a))throw new TypeError;m(i)||(i=L(i));var u=Y(a,i,!1);return m(u)?!1:u.OrdinaryDeleteMetadata(r,a,i)}t("deleteMetadata",at);function it(r,a){for(var i=r.length-1;i>=0;--i){var u=r[i],y=u(a);if(!m(y)&&!X(y)){if(!Ne(y))throw new TypeError;a=y}}return a}function ot(r,a,i,u){for(var y=r.length-1;y>=0;--y){var S=r[y],O=S(a,i,u);if(!m(O)&&!X(O)){if(!P(O))throw new TypeError;u=O}}return u}function xe(r,a,i){var u=de(r,a,i);if(u)return!0;var y=he(a);return X(y)?!1:xe(r,y,i)}function de(r,a,i){var u=Y(a,i,!1);return m(u)?!1:Ee(u.OrdinaryHasOwnMetadata(r,a,i))}function Re(r,a,i){var u=de(r,a,i);if(u)return Pe(r,a,i);var y=he(a);if(!X(y))return Re(r,y,i)}function Pe(r,a,i){var u=Y(a,i,!1);if(!m(u))return u.OrdinaryGetOwnMetadata(r,a,i)}function Oe(r,a,i,u){var y=Y(i,u,!0);y.OrdinaryDefineOwnMetadata(r,a,i,u)}function Se(r,a){var i=ke(r,a),u=he(r);if(u===null)return i;var y=Se(u,a);if(y.length<=0)return i;if(i.length<=0)return y;for(var S=new R,O=[],v=0,l=i;v<l.length;v++){var d=l[v],f=S.has(d);f||(S.add(d),O.push(d))}for(var h=0,w=y;h<w.length;h++){var d=w[h],f=S.has(d);f||(S.add(d),O.push(d))}return O}function ke(r,a){var i=Y(r,a,!1);return i?i.OrdinaryOwnMetadataKeys(r,a):[]}function Te(r){if(r===null)return 1;switch(typeof r){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return r===null?1:6;default:return 6}}function m(r){return r===void 0}function X(r){return r===null}function ct(r){return typeof r=="symbol"}function P(r){return typeof r=="object"?r!==null:typeof r=="function"}function ut(r,a){switch(Te(r)){case 0:return r;case 1:return r;case 2:return r;case 3:return r;case 4:return r;case 5:return r}var i="string",u=Ie(r,g);if(u!==void 0){var y=u.call(r,i);if(P(y))throw new TypeError;return y}return lt(r)}function lt(r,a){var i,u;{var y=r.toString;if(te(y)){var u=y.call(r);if(!P(u))return u}var i=r.valueOf;if(te(i)){var u=i.call(r);if(!P(u))return u}}throw new TypeError}function Ee(r){return!!r}function dt(r){return""+r}function L(r){var a=ut(r);return ct(a)?a:dt(a)}function Ae(r){return Array.isArray?Array.isArray(r):r instanceof Object?r instanceof Array:Object.prototype.toString.call(r)==="[object Array]"}function te(r){return typeof r=="function"}function Ne(r){return typeof r=="function"}function ft(r){switch(Te(r)){case 3:return!0;case 4:return!0;default:return!1}}function fe(r,a){return r===a||r!==r&&a!==a}function Ie(r,a){var i=r[a];if(i!=null){if(!te(i))throw new TypeError;return i}}function Ve(r){var a=Ie(r,b);if(!te(a))throw new TypeError;var i=a.call(r);if(!P(i))throw new TypeError;return i}function ze(r){return r.value}function je(r){var a=r.next();return a.done?!1:a}function Ce(r){var a=r.return;a&&a.call(r)}function he(r){var a=Object.getPrototypeOf(r);if(typeof r!="function"||r===k||a!==k)return a;var i=r.prototype,u=i&&Object.getPrototypeOf(i);if(u==null||u===Object.prototype)return a;var y=u.constructor;return typeof y!="function"||y===r?a:y}function ht(){var r;!m(Z)&&typeof s.Reflect<"u"&&!(Z in s.Reflect)&&typeof s.Reflect.defineMetadata=="function"&&(r=mt(s.Reflect));var a,i,u,y=new F,S={registerProvider:O,getProvider:l,setProvider:f};return S;function O(h){if(!Object.isExtensible(S))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case r===h:break;case m(a):a=h;break;case a===h:break;case m(i):i=h;break;case i===h:break;default:u===void 0&&(u=new R),u.add(h);break}}function v(h,w){if(!m(a)){if(a.isProviderFor(h,w))return a;if(!m(i)){if(i.isProviderFor(h,w))return a;if(!m(u))for(var M=Ve(u);;){var _=je(M);if(!_)return;var $=ze(_);if($.isProviderFor(h,w))return Ce(M),$}}}if(!m(r)&&r.isProviderFor(h,w))return r}function l(h,w){var M=y.get(h),_;return m(M)||(_=M.get(w)),m(_)&&(_=v(h,w),m(_)||(m(M)&&(M=new G,y.set(h,M)),M.set(w,_))),_}function d(h){if(m(h))throw new TypeError;return a===h||i===h||!m(u)&&u.has(h)}function f(h,w,M){if(!d(M))throw new Error("Metadata provider not registered.");var _=l(h,w);if(_!==M){if(!m(_))return!1;var $=y.get(h);m($)&&($=new G,y.set(h,$)),$.set(w,M)}return!0}}function pt(){var r;return!m(Z)&&P(s.Reflect)&&Object.isExtensible(s.Reflect)&&(r=s.Reflect[Z]),m(r)&&(r=ht()),!m(Z)&&P(s.Reflect)&&Object.isExtensible(s.Reflect)&&Object.defineProperty(s.Reflect,Z,{enumerable:!1,configurable:!1,writable:!1,value:r}),r}function yt(r){var a=new F,i={isProviderFor:function(d,f){var h=a.get(d);return m(h)?!1:h.has(f)},OrdinaryDefineOwnMetadata:O,OrdinaryHasOwnMetadata:y,OrdinaryGetOwnMetadata:S,OrdinaryOwnMetadataKeys:v,OrdinaryDeleteMetadata:l};return ee.registerProvider(i),i;function u(d,f,h){var w=a.get(d),M=!1;if(m(w)){if(!h)return;w=new G,a.set(d,w),M=!0}var _=w.get(f);if(m(_)){if(!h)return;if(_=new G,w.set(f,_),!r.setProvider(d,f,i))throw w.delete(f),M&&a.delete(d),new Error("Wrong provider for target.")}return _}function y(d,f,h){var w=u(f,h,!1);return m(w)?!1:Ee(w.has(d))}function S(d,f,h){var w=u(f,h,!1);if(!m(w))return w.get(d)}function O(d,f,h,w){var M=u(h,w,!0);M.set(d,f)}function v(d,f){var h=[],w=u(d,f,!1);if(m(w))return h;for(var M=w.keys(),_=Ve(M),$=0;;){var He=je(_);if(!He)return h.length=$,h;var bt=ze(He);try{h[$]=bt}catch(Mt){try{Ce(_)}finally{throw Mt}}$++}}function l(d,f,h){var w=u(f,h,!1);if(m(w)||!w.delete(d))return!1;if(w.size===0){var M=a.get(f);m(M)||(M.delete(h),M.size===0&&a.delete(M))}return!0}}function mt(r){var a=r.defineMetadata,i=r.hasOwnMetadata,u=r.getOwnMetadata,y=r.getOwnMetadataKeys,S=r.deleteMetadata,O=new F,v={isProviderFor:function(l,d){var f=O.get(l);return!m(f)&&f.has(d)?!0:y(l,d).length?(m(f)&&(f=new R,O.set(l,f)),f.add(d),!0):!1},OrdinaryDefineOwnMetadata:a,OrdinaryHasOwnMetadata:i,OrdinaryGetOwnMetadata:u,OrdinaryOwnMetadataKeys:y,OrdinaryDeleteMetadata:S};return v}function Y(r,a,i){var u=ee.getProvider(r,a);if(!m(u))return u;if(i){if(ee.setProvider(r,a,Fe))return Fe;throw new Error("Illegal state.")}}function gt(){var r={},a=[],i=(function(){function v(l,d,f){this._index=0,this._keys=l,this._values=d,this._selector=f}return v.prototype["@@iterator"]=function(){return this},v.prototype[b]=function(){return this},v.prototype.next=function(){var l=this._index;if(l>=0&&l<this._keys.length){var d=this._selector(this._keys[l],this._values[l]);return l+1>=this._keys.length?(this._index=-1,this._keys=a,this._values=a):this._index++,{value:d,done:!1}}return{value:void 0,done:!0}},v.prototype.throw=function(l){throw this._index>=0&&(this._index=-1,this._keys=a,this._values=a),l},v.prototype.return=function(l){return this._index>=0&&(this._index=-1,this._keys=a,this._values=a),{value:l,done:!0}},v})(),u=(function(){function v(){this._keys=[],this._values=[],this._cacheKey=r,this._cacheIndex=-2}return Object.defineProperty(v.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),v.prototype.has=function(l){return this._find(l,!1)>=0},v.prototype.get=function(l){var d=this._find(l,!1);return d>=0?this._values[d]:void 0},v.prototype.set=function(l,d){var f=this._find(l,!0);return this._values[f]=d,this},v.prototype.delete=function(l){var d=this._find(l,!1);if(d>=0){for(var f=this._keys.length,h=d+1;h<f;h++)this._keys[h-1]=this._keys[h],this._values[h-1]=this._values[h];return this._keys.length--,this._values.length--,fe(l,this._cacheKey)&&(this._cacheKey=r,this._cacheIndex=-2),!0}return!1},v.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=r,this._cacheIndex=-2},v.prototype.keys=function(){return new i(this._keys,this._values,y)},v.prototype.values=function(){return new i(this._keys,this._values,S)},v.prototype.entries=function(){return new i(this._keys,this._values,O)},v.prototype["@@iterator"]=function(){return this.entries()},v.prototype[b]=function(){return this.entries()},v.prototype._find=function(l,d){if(!fe(this._cacheKey,l)){this._cacheIndex=-1;for(var f=0;f<this._keys.length;f++)if(fe(this._keys[f],l)){this._cacheIndex=f;break}}return this._cacheIndex<0&&d&&(this._cacheIndex=this._keys.length,this._keys.push(l),this._values.push(void 0)),this._cacheIndex},v})();return u;function y(v,l){return v}function S(v,l){return l}function O(v,l){return[v,l]}}function vt(){var r=(function(){function a(){this._map=new G}return Object.defineProperty(a.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),a.prototype.has=function(i){return this._map.has(i)},a.prototype.add=function(i){return this._map.set(i,i),this},a.prototype.delete=function(i){return this._map.delete(i)},a.prototype.clear=function(){this._map.clear()},a.prototype.keys=function(){return this._map.keys()},a.prototype.values=function(){return this._map.keys()},a.prototype.entries=function(){return this._map.entries()},a.prototype["@@iterator"]=function(){return this.keys()},a.prototype[b]=function(){return this.keys()},a})();return r}function wt(){var r=16,a=N.create(),i=u();return(function(){function l(){this._key=u()}return l.prototype.has=function(d){var f=y(d,!1);return f!==void 0?N.has(f,this._key):!1},l.prototype.get=function(d){var f=y(d,!1);return f!==void 0?N.get(f,this._key):void 0},l.prototype.set=function(d,f){var h=y(d,!0);return h[this._key]=f,this},l.prototype.delete=function(d){var f=y(d,!1);return f!==void 0?delete f[this._key]:!1},l.prototype.clear=function(){this._key=u()},l})();function u(){var l;do l="@@WeakMap@@"+v();while(N.has(a,l));return a[l]=!0,l}function y(l,d){if(!o.call(l,i)){if(!d)return;Object.defineProperty(l,i,{value:N.create()})}return l[i]}function S(l,d){for(var f=0;f<d;++f)l[f]=Math.random()*255|0;return l}function O(l){if(typeof Uint8Array=="function"){var d=new Uint8Array(l);return typeof crypto<"u"?crypto.getRandomValues(d):typeof msCrypto<"u"?msCrypto.getRandomValues(d):S(d,l),d}return S(new Array(l),l)}function v(){var l=O(r);l[6]=l[6]&79|64,l[8]=l[8]&191|128;for(var d="",f=0;f<r;++f){var h=l[f];(f===4||f===6||f===8)&&(d+="-"),h<16&&(d+="0"),d+=h.toString(16).toLowerCase()}return d}}function pe(r){return r.__=void 0,delete r.__,r}})})(n||(n={})),$e}Rt();class Ze{static addFieldToType(e,t,s,o,p){let g=new Map;Reflect.hasOwnMetadata("fields",e)&&(g=Reflect.getOwnMetadata("fields",e)),g.set(t,new xt(t,s,o,p)),Reflect.defineMetadata("fields",g,e)}static getFieldsForType(e){const t=[];if(Reflect.hasOwnMetadata("fields",e)){const s=Reflect.getOwnMetadata("fields",e);for(const o of s.entries())t.push(o[1])}return t}}const Pt=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/,T=[];(()=>{for(let n=0;n<256;n+=1)T[n]=(n<16?"0":"")+n.toString(16)})();const A=n=>n.toString(16).padStart(2,"0"),q=class q{constructor(e){c(this,"bytes");c(this,"_stringVersion","");if(this.bytes=e,e===void 0){this._stringVersion=q.empty.toString();return}this._stringVersion=""+A(e[3])+A(e[2])+A(e[1])+A(e[0])+"-"+A(e[5])+A(e[4])+"-"+A(e[7])+A(e[6])+"-"+A(e[8])+A(e[9])+"-"+A(e[10])+A(e[11])+A(e[12])+A(e[13])+A(e[14])+A(e[15])}static create(){const e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,s=Math.random()*4294967295|0,o=Math.random()*4294967295|0,p=[T[e&255],T[e>>8&255],T[e>>16&255],T[e>>24&255],T[t&255],T[t>>8&255],T[t>>16&15|64],T[t>>24&255],T[s&63|128],T[s>>8&255],T[s>>16&255],T[s>>24&255],T[o&255],T[o>>8&255],T[o>>16&255],T[o>>24&255]];return new q(p.map(g=>parseInt(`0x${g}`,16)))}static parse(e){const t=[];return e.split("-").map((s,o)=>{var g;const p=o<3?(g=s.match(/.{1,2}/g))==null?void 0:g.reverse():s.match(/.{1,2}/g);p==null||p.map(b=>{t.push(parseInt(b,16))})}),new q(t)}static isGuid(e){return Pt.test(e)}static as(e){return typeof e=="string"?q.parse(e):e}equals(e){const t=e instanceof q?e:e.toString();return typeof t=="string"&&!q.isGuid(t)?!1:q.as(t).toString()===this.toString()}toString(){return this._stringVersion}toJSON(){return this._stringVersion}};c(q,"empty",new q([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]));let U=q;function I(n,e,t,s){var o=arguments.length,p=o<3?e:s,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(n,e,t,s);else for(var b=n.length-1;b>=0;b--)(g=n[b])&&(p=(o<3?g(p):o>3?g(e,t,p):g(e,t))||p);return o>3&&p&&Object.defineProperty(e,t,p),p}function V(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function z(n,e,t){return function(s,o){Ze.addFieldToType(s.constructor,o,n,!1,[])}}const Ot=/^(-)?(?:(\d+)\.)?(\d{1,2}):(\d{2}):(\d{2})(?:\.(\d{1,7}))?$/;class x{constructor(){c(this,"ticks");c(this,"days");c(this,"hours");c(this,"milliseconds");c(this,"microseconds");c(this,"nanoseconds");c(this,"minutes");c(this,"seconds");c(this,"totalDays");c(this,"totalHours");c(this,"totalMilliseconds");c(this,"totalMicroseconds");c(this,"totalNanoseconds");c(this,"totalMinutes");c(this,"totalSeconds")}static parse(e){const t=Ot.exec(e);if(t===null)throw new Error(`Invalid TimeSpan format: ${e}`);const s=t[1]==="-",o=t[2]?parseInt(t[2],10):0,p=parseInt(t[3],10),g=parseInt(t[4],10),b=parseInt(t[5],10),E=t[6]?t[6].padEnd(7,"0"):"0000000",j=864e9,D=36e9,N=6e8,k=1e7,G=o*j+p*D+g*N+b*k+parseInt(E,10),R=s?-G:G,F=new x;return F.ticks=R,F.days=Math.floor(Math.abs(R)/j)*(s?-1:1),F.hours=Math.floor(Math.abs(R)/D%24),F.minutes=Math.floor(Math.abs(R)/N%60),F.seconds=Math.floor(Math.abs(R)/k%60),F.milliseconds=Math.floor(Math.abs(R)/1e4%1e3),F.microseconds=Math.floor(Math.abs(R)/10%1e3),F.nanoseconds=Math.floor(Math.abs(R)%10*100),F.totalDays=R/j,F.totalHours=R/D,F.totalMinutes=R/N,F.totalSeconds=R/k,F.totalMilliseconds=R/1e4,F.totalMicroseconds=R/10,F.totalNanoseconds=R*100,F}toString(){const e=this.ticks<0,t=Math.abs(this.ticks),s=864e9,o=36e9,p=6e8,g=1e7,b=Math.floor(t/s),E=Math.floor(t/o%24),j=Math.floor(t/p%60),D=Math.floor(t/g%60),N=t%g,k=[];if(e&&k.push("-"),b>0&&k.push(`${b}.`),k.push(`${E.toString().padStart(2,"0")}:`),k.push(`${j.toString().padStart(2,"0")}:`),k.push(`${D.toString().padStart(2,"0")}`),N>0){const G=N.toString().padStart(7,"0").replace(/0+$/,"");k.push(`.${G}`)}return k.join("")}toJSON(){return this.toString()}}I([z(Number),V("design:type",Number)],x.prototype,"ticks",void 0);I([z(Number),V("design:type",Number)],x.prototype,"days",void 0);I([z(Number),V("design:type",Number)],x.prototype,"hours",void 0);I([z(Number),V("design:type",Number)],x.prototype,"milliseconds",void 0);I([z(Number),V("design:type",Number)],x.prototype,"microseconds",void 0);I([z(Number),V("design:type",Number)],x.prototype,"nanoseconds",void 0);I([z(Number),V("design:type",Number)],x.prototype,"minutes",void 0);I([z(Number),V("design:type",Number)],x.prototype,"seconds",void 0);I([z(Number),V("design:type",Number)],x.prototype,"totalDays",void 0);I([z(Number),V("design:type",Number)],x.prototype,"totalHours",void 0);I([z(Number),V("design:type",Number)],x.prototype,"totalMilliseconds",void 0);I([z(Number),V("design:type",Number)],x.prototype,"totalMicroseconds",void 0);I([z(Number),V("design:type",Number)],x.prototype,"totalNanoseconds",void 0);I([z(Number),V("design:type",Number)],x.prototype,"totalMinutes",void 0);I([z(Number),V("design:type",Number)],x.prototype,"totalSeconds",void 0);class St{static set(e,t){Reflect.defineMetadata("derivedType",t,e)}static get(e){return Reflect.getOwnMetadata("derivedType",e)}}const me=new Map([[Number,n=>n],[String,n=>n],[Boolean,n=>n],[Date,n=>n.toISOString()],[U,n=>(n==null?void 0:n.toString())??""],[x,n=>(n==null?void 0:n.toString())??""]]),K=new Map([[Number,n=>n],[String,n=>n],[Boolean,n=>n],[Date,n=>new Date(n)],[U,n=>U.parse(n.toString())],[x,n=>x.parse(n.toString())]]),Ge=(n,e)=>e&&(me.has(n)?me.get(n)(e):_e(e)),kt=(n,e)=>K.has(n)?K.get(n)(e):B.deserialize(n,JSON.stringify(e)),Le=(n,e)=>{if(K.has(n.type))return K.get(n.type)(e);{let t=n.type;if(n.derivatives.length>0&&e[B.DerivedTypeIdProperty]){const s=e[B.DerivedTypeIdProperty];t=n.derivatives.find(o=>St.get(o)==s)||t}return B.deserialize(t,JSON.stringify(e))}},_e=n=>{if(me.has(n.constructor))return Ge(n.constructor,n);const e=Object.getOwnPropertyNames(n),t={};return e.forEach(s=>{let o=n[s];o!==void 0&&(Array.isArray(o)?o=o.map(p=>_e(p)):o=Ge(o.__proto__.constructor,o)),t[s]=o}),t};class B{static serialize(e){const t=_e(e);return JSON.stringify(t)}static deserialize(e,t){const s=JSON.parse(t);return this.deserializeFromInstance(e,s)}static deserializeArray(e,t){const s=JSON.parse(t);return this.deserializeArrayFromInstance(e,s)}static deserializeFromInstance(e,t){const s=Ze.getFieldsForType(e);if(K.has(e))return kt(e,t);const o=new e;for(const p of s){let g=t[p.name];g&&(p.enumerable?g=g.map(b=>Le(p,b)):g=Le(p,g)),o[p.name]=g}if(e==Object){const p=Object.keys(t).filter(g=>!s.some(b=>b.name==g));for(const g of p)o[g]=t[g]}return o}static deserializeArrayFromInstance(e,t){const s=[];for(const o of t)s.push(this.deserializeFromInstance(e,o));return s}}c(B,"DerivedTypeIdProperty","_derivedTypeId");class le{constructor(e,t,s,o){c(this,"severity");c(this,"message");c(this,"members");c(this,"state");this.severity=e,this.message=t,this.members=s,this.state=o}}const J=class J{constructor(e,t=Object,s){c(this,"correlationId");c(this,"isSuccess");c(this,"isAuthorized");c(this,"isValid");c(this,"hasExceptions");c(this,"validationResults");c(this,"exceptionMessages");c(this,"exceptionStackTrace");c(this,"authorizationFailureReason");c(this,"response");this.correlationId=U.parse(e.correlationId),this.isSuccess=e.isSuccess,this.isAuthorized=e.isAuthorized,this.isValid=e.isValid,this.hasExceptions=e.hasExceptions,this.validationResults=e.validationResults.map(o=>new le(o.severity,o.message,o.members,o.state)),this.exceptionMessages=e.exceptionMessages,this.exceptionStackTrace=e.exceptionStackTrace,this.authorizationFailureReason=e.authorizationFailureReason,e.response&&(s?this.response=B.deserializeArrayFromInstance(t,e.response):this.response=B.deserializeFromInstance(t,e.response))}onSuccess(e){return this.isSuccess&&e(this.response),this}onFailed(e){return this.isSuccess||e(this),this}onException(e){return this.hasExceptions&&e(this.exceptionMessages,this.exceptionStackTrace),this}onUnauthorized(e){return this.isAuthorized||e(),this}onValidationFailure(e){return this.isValid||e(this.validationResults),this}};c(J,"empty",new J({correlationId:U.empty.toString(),isSuccess:!0,isAuthorized:!0,isValid:!0,hasExceptions:!1,validationResults:[],exceptionMessages:[],exceptionStackTrace:"",authorizationFailureReason:"",response:null},Object,!1)),c(J,"failed",e=>new J({correlationId:U.empty.toString(),isSuccess:!1,isAuthorized:!0,isValid:!0,hasExceptions:!0,validationResults:[],exceptionMessages:e,exceptionStackTrace:"",authorizationFailureReason:"",response:null},Object,!1)),c(J,"validationFailed",e=>new J({correlationId:U.empty.toString(),isSuccess:!1,isAuthorized:!0,isValid:!1,hasExceptions:!1,validationResults:e.map(t=>({severity:t.severity,message:t.message,members:t.members,state:t.state})),exceptionMessages:[],exceptionStackTrace:"",authorizationFailureReason:"",response:null},Object,!1));let W=J;const re={microservice:"",apiBasePath:"",origin:"",microserviceHttpHeader:"x-cratis-microservice"};function Tt(...n){return n.join("/").replace("//","/")}class ye{static createUrlFrom(e,t,s){var o;return(!e||e.length===0)&&typeof document<"u"&&(e=((o=document.location)==null?void 0:o.origin)??""),new URL(s,`${e}${t}`)}static replaceRouteParameters(e,t){if(!t)return{route:e,unusedParameters:{}};let s=e;const o={...t};for(const[p,g]of Object.entries(t)){const b=new RegExp(`\\{${p}\\}`,"gi"),E=s.replace(b,encodeURIComponent(String(g)));E!==s&&(delete o[p],s=E)}return{route:s,unusedParameters:o}}static buildQueryParams(e,t){const s=new URLSearchParams;for(const[o,p]of Object.entries(e))p!=null&&s.set(o,String(p));if(t)for(const[o,p]of Object.entries(t))s.set(o,String(p));return s}}var ne;(function(n){n[n.Unknown=0]="Unknown",n[n.Information=1]="Information",n[n.Warning=2]="Warning",n[n.Error=3]="Error"})(ne||(ne={}));class sr{constructor(e=Object,t){c(this,"_responseType");c(this,"_isResponseTypeEnumerable");c(this,"_microservice");c(this,"_apiBasePath");c(this,"_origin");c(this,"_httpHeadersCallback");c(this,"validation");c(this,"_initialValues",{});c(this,"_hasChanges",!1);c(this,"_callbacks",[]);this._responseType=e,this._isResponseTypeEnumerable=t,this._microservice=re.microservice,this._apiBasePath=re.apiBasePath,this._origin=re.origin,this._httpHeadersCallback=()=>({})}setMicroservice(e){this._microservice=e}setApiBasePath(e){this._apiBasePath=e}setOrigin(e){this._origin=e}setHttpHeadersCallback(e){this._httpHeadersCallback=e}async execute(){var p;const e=((p=this.validation)==null?void 0:p.validate(this))||[];if(e.length>0)return W.validationFailed(e);const t=this.validateRequiredProperties();if(t.length>0)return W.validationFailed(t);let s=this.route;if(this.requestParameters&&this.requestParameters.length>0){const g=this.buildPayload(),{route:b}=ye.replaceRouteParameters(this.route,g);s=b}const o=await this.performRequest(s,"Command not found at route","Error during server call");return this.setInitialValuesFromCurrentValues(),o}async validate(){var o;const e=((o=this.validation)==null?void 0:o.validate(this))||[];if(e.length>0)return W.validationFailed(e);const t=this.validateRequiredProperties();if(t.length>0)return W.validationFailed(t);let s=this.route;if(this.requestParameters&&this.requestParameters.length>0){const p=this.buildPayload(),{route:g}=ye.replaceRouteParameters(this.route,p);s=g}return s=`${s}/validate`,this.performRequest(s,"Command validation endpoint not found at route","Error during validation call")}buildPayload(){const e={};return this.propertyDescriptors.forEach(t=>{const s=t.name;e[s]=this[s]}),e}validateRequiredProperties(){const e=[];return this.propertyDescriptors.forEach(t=>{if(!t.isOptional&&!this.requestParameters.includes(t.name)){const s=this[t.name];(s==null||s==="")&&e.push(new le(ne.Error,`${t.name} is required`,[t.name],null))}}),e}buildHeaders(){var s,o;const t={...((s=this._httpHeadersCallback)==null?void 0:s.call(this))??{},Accept:"application/json","Content-Type":"application/json"};return((o=this._microservice)==null?void 0:o.length)>0&&(t[re.microserviceHttpHeader]=this._microservice),t}async performRequest(e,t,s){const o=this.buildPayload(),p=this.buildHeaders(),g=Tt(this._apiBasePath,e),b=ye.createUrlFrom(this._origin,this._apiBasePath,g);try{const E=await fetch(b,{method:"POST",headers:p,body:B.serialize(o)});if(E.status===404)return W.failed([`${t} '${g}'`]);const j=await E.json();return new W(j,this._responseType,this._isResponseTypeEnumerable)}catch(E){return W.failed([`${s}: ${E}`])}}clear(){this.propertyDescriptors.forEach(e=>{const t=e.name;this[t]=void 0}),this._initialValues={},this._hasChanges=!1}setInitialValues(e){this.propertyDescriptors.forEach(t=>{const s=t.name;Object.prototype.hasOwnProperty.call(e,s)&&(this._initialValues[s]=e[s],this[s]=e[s])}),this.updateHasChanges()}setInitialValuesFromCurrentValues(){this.propertyDescriptors.forEach(e=>{const t=e.name;this[t]&&(this._initialValues[t]=this[t])}),this.updateHasChanges()}revertChanges(){this.propertyDescriptors.forEach(e=>{const t=e.name;this[t]=this._initialValues[t]})}get hasChanges(){return this._hasChanges}propertyChanged(e){this.updateHasChanges(),this._callbacks.forEach(t=>{const s=t.callback.deref(),o=t.thisArg.deref();s&&o?s.call(o,e):this._callbacks=this._callbacks.filter(p=>p.callback!==t.callback)})}onPropertyChanged(e,t){this._callbacks.push({callback:new WeakRef(e),thisArg:new WeakRef(t)})}updateHasChanges(){this._hasChanges=this.propertyDescriptors.some(e=>{const t=e.name;return this[t]!==this._initialValues[t]})}}class ar{constructor(e){c(this,"_commandResultsPerCommand");c(this,"correlationId",U.empty);this._commandResultsPerCommand=e}get isSuccess(){return this.isAnyFalse(e=>e.isSuccess)}get isAuthorized(){return this.isAnyFalse(e=>e.isAuthorized)}get isValid(){return this.isAnyFalse(e=>e.isValid)}get hasExceptions(){return this.isAnyTrue(e=>e.hasExceptions)}get validationResults(){const e=[];for(const t of this._commandResultsPerCommand.values())t.validationResults.forEach(s=>e.push(s));return e}get exceptionMessages(){const e=[];for(const t of this._commandResultsPerCommand.values())t.exceptionMessages.forEach(s=>e.push(s));return e}get authorizationFailureReason(){const e=[];for(const t of this._commandResultsPerCommand.values())t.authorizationFailureReason&&e.push(t.authorizationFailureReason);return e.join("; ")}get exceptionStackTrace(){let e="";for(const t of this._commandResultsPerCommand.values())e=e+`
`+t.exceptionStackTrace;return e}isAnyFalse(e){for(const t of this._commandResultsPerCommand.values())if(!e(t))return!1;return!0}isAnyTrue(e){for(const t of this._commandResultsPerCommand.values())if(e(t))return!0;return!1}}class Et{constructor(e){c(this,"propertyName");c(this,"_rules",[]);this.propertyName=e}addRule(e){this._rules.push(e)}validate(e){const t=[];for(const s of this._rules){const o=s.validate(e,this.propertyName);t.push(...o)}return t}isValid(e){return this.validate(e).length===0}}class C{constructor(e,t){c(this,"propertyAccessor");c(this,"errorMessage");this.propertyAccessor=e,this.errorMessage=t}withMessage(e){return this.errorMessage=e,this}validate(e,t){const s=this.propertyAccessor(e);return this.isValid(s,e)?[]:[new le(ne.Error,this.errorMessage.replace("{PropertyName}",t),[t],null)]}}class H{constructor(e,t){c(this,"propertyValidator");c(this,"_propertyAccessor");c(this,"lastRule");this.propertyValidator=e,this._propertyAccessor=t}addRule(e){return this.propertyValidator.addRule(e),this.lastRule=e,this}withMessage(e){return this.lastRule&&this.lastRule instanceof C&&this.lastRule.withMessage(e),this}}class At{constructor(){c(this,"_propertyValidators",new Map)}ruleFor(e){const t=this.getPropertyName(e);let s=this._propertyValidators.get(t);return s||(s=new Et(t),this._propertyValidators.set(t,s)),new H(s,e)}validate(e){const t=[];for(const s of this._propertyValidators.values()){const o=s.validate(e);t.push(...o)}return t}get isValid(){return!0}isValidFor(e){return this.validate(e).length===0}getPropertyName(e){const t=[],s=new Proxy({},{get(o,p){typeof p=="string"&&t.push(p)}});try{e(s)}catch{}return t[0]||"unknown"}}class ir extends At{validate(e){return super.validate(e)}}class Nt extends C{constructor(e){super(e,"'{PropertyName}' must not be empty.")}isValid(e){return!(e==null||typeof e=="string"&&e.trim()===""||Array.isArray(e)&&e.length===0)}}class It extends C{constructor(e){super(e,"'{PropertyName}' must not be empty.")}isValid(e){return e!=null}}class Vt extends C{constructor(t,s){super(t,`'{PropertyName}' must be at least ${s} characters.`);c(this,"minLength");this.minLength=s}isValid(t){return t==null?!0:t.length>=this.minLength}}class zt extends C{constructor(t,s){super(t,`'{PropertyName}' must be at most ${s} characters.`);c(this,"maxLength");this.maxLength=s}isValid(t){return t==null?!0:t.length<=this.maxLength}}class jt extends C{constructor(t,s,o){super(t,`'{PropertyName}' must be between ${s} and ${o} characters.`);c(this,"min");c(this,"max");this.min=s,this.max=o}isValid(t){return t==null?!0:t.length>=this.min&&t.length<=this.max}}const se=class se extends C{constructor(e){super(e,"'{PropertyName}' is not a valid email address.")}isValid(e){return e==null||e===""?!0:se.emailRegex.test(e)}};c(se,"emailRegex",/^[^\s@]+@[^\s@]+\.[^\s@]+$/);let ge=se;const ae=class ae extends C{constructor(e){super(e,"'{PropertyName}' is not a valid phone number.")}isValid(e){return e==null||e===""?!0:ae.phoneRegex.test(e)}};c(ae,"phoneRegex",/^[\d\s()+-]+$/);let ve=ae;const ie=class ie extends C{constructor(e){super(e,"'{PropertyName}' is not a valid URL.")}isValid(e){return e==null||e===""?!0:ie.urlRegex.test(e)}};c(ie,"urlRegex",/^https?:\/\/.+/i);let we=ie;class Ct extends C{constructor(t,s,o){super(t,o||"'{PropertyName}' is not in the correct format.");c(this,"pattern");this.pattern=s}isValid(t){return t==null||t===""?!0:this.pattern.test(t)}}class Ht extends C{constructor(t,s){super(t,`'{PropertyName}' must be greater than ${s}.`);c(this,"threshold");this.threshold=s}isValid(t){return t==null?!0:t>this.threshold}}class Dt extends C{constructor(t,s){super(t,`'{PropertyName}' must be greater than or equal to ${s}.`);c(this,"threshold");this.threshold=s}isValid(t){return t==null?!0:t>=this.threshold}}class $t extends C{constructor(t,s){super(t,`'{PropertyName}' must be less than ${s}.`);c(this,"threshold");this.threshold=s}isValid(t){return t==null?!0:t<this.threshold}}class qt extends C{constructor(t,s){super(t,`'{PropertyName}' must be less than or equal to ${s}.`);c(this,"threshold");this.threshold=s}isValid(t){return t==null?!0:t<=this.threshold}}function Gt(){const n=this._propertyAccessor;return this.addRule(new Nt(n))}function Lt(){const n=this._propertyAccessor;return this.addRule(new It(n))}function Ut(n){const e=this._propertyAccessor;return this.addRule(new Vt(e,n))}function Bt(n){const e=this._propertyAccessor;return this.addRule(new zt(e,n))}function Wt(n,e){const t=this._propertyAccessor;return this.addRule(new jt(t,n,e))}function Jt(){const n=this._propertyAccessor;return this.addRule(new ge(n))}function Zt(){const n=this._propertyAccessor;return this.addRule(new ve(n))}function Xt(){const n=this._propertyAccessor;return this.addRule(new we(n))}function Yt(n,e){const t=this._propertyAccessor;return this.addRule(new Ct(t,n,e))}function Qt(n){const e=this._propertyAccessor;return this.addRule(new Ht(e,n))}function Kt(n){const e=this._propertyAccessor;return this.addRule(new Dt(e,n))}function er(n){const e=this._propertyAccessor;return this.addRule(new $t(e,n))}function tr(n){const e=this._propertyAccessor;return this.addRule(new qt(e,n))}H.prototype.notEmpty=Gt;H.prototype.notNull=Lt;H.prototype.minLength=Ut;H.prototype.maxLength=Bt;H.prototype.length=Wt;H.prototype.emailAddress=Jt;H.prototype.phone=Zt;H.prototype.url=Xt;H.prototype.matches=Yt;H.prototype.greaterThan=Qt;H.prototype.greaterThanOrEqual=Kt;H.prototype.lessThan=er;H.prototype.lessThanOrEqual=tr;const oe=class oe{constructor(e,t){c(this,"page");c(this,"pageSize");this.page=e??0,this.pageSize=t??0}get hasPaging(){return this.page>0||this.pageSize>0}};c(oe,"noPaging",new oe(0,0));let Ue=oe;var be;(function(n){n[n.unspecified=0]="unspecified",n[n.ascending=1]="ascending",n[n.descending=2]="descending"})(be||(be={}));const ce=class ce{constructor(e,t){c(this,"field");c(this,"direction");this.field=e,this.direction=t}get hasSorting(){return this.field!==""}};c(ce,"none",new ce("",be.ascending));let Be=ce;const ue=class ue{constructor(){c(this,"page");c(this,"size");c(this,"totalItems");c(this,"totalPages");this.page=0,this.size=0,this.totalItems=0,this.totalPages=0}};c(ue,"noPaging",new ue);let Me=ue;const Q=class Q{constructor(e,t,s){c(this,"data");c(this,"paging");c(this,"isSuccess");c(this,"isAuthorized");c(this,"isValid");c(this,"hasExceptions");c(this,"validationResults");c(this,"exceptionMessages");c(this,"exceptionStackTrace");if(this.isSuccess=e.isSuccess,this.isAuthorized=e.isAuthorized,this.isValid=e.isValid,this.hasExceptions=e.hasExceptions,this.validationResults=e.validationResults.map(o=>new le(o.severity,o.message,o.members,o.state)),this.exceptionMessages=e.exceptionMessages,this.exceptionStackTrace=e.exceptionStackTrace,this.paging=new Me,this.paging.page=e.paging.page,this.paging.size=e.paging.size,this.paging.totalItems=e.paging.totalItems,this.paging.totalPages=e.paging.totalPages,e.data){let o=e.data;s?Array.isArray(e.data)?o=B.deserializeArrayFromInstance(t,o):o=[]:o=B.deserializeFromInstance(t,o),this.data=o}else this.data=null}static empty(e){return new Q({data:e,isSuccess:!0,isAuthorized:!0,isValid:!0,hasExceptions:!1,validationResults:[],exceptionMessages:[],exceptionStackTrace:"",paging:{totalItems:0,totalPages:0,page:0,size:0}},Object,!1)}get hasData(){return this.data?Array.isArray(this.data)?this.data.length>0:!0:!1}};c(Q,"noSuccess",new Q({data:{},isSuccess:!1,isAuthorized:!0,isValid:!0,hasExceptions:!1,validationResults:[],exceptionMessages:[],exceptionStackTrace:"",paging:{totalItems:0,totalPages:0,page:0,size:0}},Object,!1));let We=Q;var Je;(function(n){n.Data="Data",n.Ping="Ping",n.Pong="Pong"})(Je||(Je={}));class or{constructor(e,t,s=!1){c(this,"name");c(this,"type");c(this,"isOptional");this.name=e,this.type=t,this.isOptional=s}}export{ar as C,re as G,or as P,sr as a,ir as b};
